<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Registration Form</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
  </head>

  <body>

  <div class="form-container">
    <h2 class="text-center mb-4">Politeknik Kuching Sarawak</h2>
    <h4 class="text-center mb-4">Student Registration Form</h2>
    <form id="studentForm">

      <div class="card mb-4">
        <div class="card-header bg-primary text-white">Student Information</div>
        <div class="card-body">
          <div class="mb-3">
            <label for="studentImage" class="form-label">Student Image (less than 5MB)</label>
            <input type="file" class="form-control" id="studentImage" accept="image/*" onchange="previewImage(event)">
            <div class="preview-box">
              <img id="preview" alt="Image Preview">
            </div>
          </div>

          <div class="mb-3">
            <label for="studentName" class="form-label">Student Name</label>
            <input type="text" class="form-control" id="studentName" placeholder="Full Name" onchange="toUpperCaseField(this)">
          </div>

          <div class="mb-3">
            <label class="form-label">Gender</label><br>
            <input type="radio" name="gender" value="Male"> Male
            <input type="radio" name="gender" value="Female"> Female
          </div>

          <div class="mb-3">
            <label for="dob" class="form-label">Date of Birth</label>
            <input type="date" class="form-control" id="dob" onblur="fieldBlur(this)">
          </div>

          <div class="mb-3">
            <label for="email" class="form-label">E-mail</label>
            <input type="email" class="form-control" id="email" placeholder="email@xyz.com" onfocus="fieldFocus(this)">
          </div>

          <div class="mb-3">
            <label for="phone" class="form-label">Tel/Mobile</label>
            <input type="tel" class="form-control" id="phone" placeholder="0xxxx-xxxxxx">
          </div>
        </div>
      </div>

      <div class="card mb-4">
        <div class="card-header bg-success text-white">Parent Information</div>
        <div class="card-body">
          <div class="mb-3">
            <label for="fatherName" class="form-label">Father's Name</label>
            <input type="text" class="form-control" id="fatherName" placeholder="Father's Full Name" onchange="toUpperCaseField(this)">
          </div>
          <div class="mb-3">
            <label for="fatherPhone" class="form-label">Father's Phone Number</label>
            <input type="tel" class="form-control" id="fatherPhone" placeholder="e.g. 012-3456789" pattern="[0-9]{3}-[0-9]{7,8}" required>
            <div class="form-text">Format: 012-3456789</div>
          </div>

          <div class="mb-3">
            <label for="motherName" class="form-label">Mother's Name</label>
            <input type="text" class="form-control" id="motherName" placeholder="Mother's Full Name" onchange="toUpperCaseField(this)">
          </div>
          <div class="mb-3">
            <label for="motherPhone" class="form-label">Mother's Phone Number</label>
            <input type="tel" class="form-control" id="motherPhone" placeholder="e.g. 013-9876543" pattern="[0-9]{3}-[0-9]{7,8}" required>
            <div class="form-text">Format: 013-9876543</div>
          </div>
        </div>
      </div>

          <div class="card mb-4">
            <div class="card-header bg-warning">Academic Information</div>
            <div class="card-body">
              <div class="mb-3">
                <label for="level" class="form-label">Level</label>
                <select class="form-select" id="level" onchange="updateDepartments()">
                  <option value="">-- Select Level --</option>
                  <option value="Diploma">Diploma</option>
                  <option value="Foundation">Foundation</option>
                </select>
              </div>

              <div class="mb-3">
                <label for="department" class="form-label">Department</label>
                <select class="form-select" id="department">
                  <option value="">-- Select Department --</option>
                </select>
              </div>
            </div>
          </div>

          <div class="card mb-4">
            <div class="card-header bg-info text-white">Address Information</div>
            <div class="card-body">
              <div class="mb-3">
                <label for="state" class="form-label">State</label>
                <select class="form-select" id="state" required>
                  <option value="">-- Select State --</option>
                  <option value="Johor">Johor</option>
                  <option value="Kedah">Kedah</option>
                  <option value="Kelantan">Kelantan</option>
                  <option value="Melaka">Melaka</option>
                  <option value="Negeri Sembilan">Negeri Sembilan</option>
                  <option value="Pahang">Pahang</option>
                  <option value="Perak">Perak</option>
                  <option value="Perlis">Perlis</option>
                  <option value="Pulau Pinang">Pulau Pinang</option>
                  <option value="Sabah">Sabah</option>
                  <option value="Sarawak">Sarawak</option>
                  <option value="Selangor">Selangor</option>
                  <option value="Terengganu">Terengganu</option>
                  <option value="Wilayah Persekutuan Kuala Lumpur">Wilayah Persekutuan Kuala Lumpur</option>
                  <option value="Wilayah Persekutuan Labuan">Wilayah Persekutuan Labuan</option>
                  <option value="Wilayah Persekutuan Putrajaya">Wilayah Persekutuan Putrajaya</option>
                </select>
              </div>

              <div class="mb-3">
                <label for="city" class="form-label">City</label>
                <input type="text" class="form-control" id="city">
              </div>

              <div class="mb-3">
                <label for="postcode" class="form-label">Postcode</label>
                <input type="text" class="form-control" id="postcode">
              </div>
            </div>
          </div>

          <div class="text-center">
            <button type="submit" class="btn btn-primary">Register</button>
            <button type="reset" class="btn btn-secondary">Reset</button>
          </div>
        </form>
      </div>

      <div class="modal fade" id="successModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Registration Successful</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
              Your details have been saved!
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-success" data-bs-dismiss="modal">OK</button>
            </div>
          </div>
        </div>
      </div>

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
      <script>
        function toUpperCaseField(field) {
          field.value = field.value.toUpperCase();
        }

        function fieldBlur(field) {
          field.style.borderColor = "gray";
        }

        function fieldFocus(field) {
          field.style.borderColor = "blue";
        }

        function previewImage(event) {
          const preview = document.getElementById('preview');
          const file = event.target.files[0];
          if (file) {
            if (file.size > 5 * 1024 * 1024) { // 5MB limit
              alert("File size must be less than 5MB");
              event.target.value = "";
              preview.style.display = "none";
              return;
            }
            const reader = new FileReader();
            reader.onload = function(e) {
              preview.src = e.target.result;
              preview.style.display = "block";
            }
            reader.readAsDataURL(file);
          } else {
            preview.style.display = "none";
          }
        }

        document.getElementById("studentForm").addEventListener("submit", function(e) {
          e.preventDefault();
          let modal = new bootstrap.Modal(document.getElementById("successModal"));
          modal.show();
        });

        const departmentsByLevel = {
          "Diploma": [
            "Information Technology",
            "Mechanical Engineering",
            "Civil Engineering",
            "Petrochemical Engineering",
            "Electrical Engineering",
            "Commerce"
          ],
          "Foundation": [
            "Engineering Technology"
          ]
        };

        function updateDepartments() {
          const levelSelect = document.getElementById("level");
          const deptSelect = document.getElementById("department");
          const selectedLevel = levelSelect.value;

          deptSelect.innerHTML = '<option value="">-- Select Department --</option>';

          if (departmentsByLevel[selectedLevel]) {
            departmentsByLevel[selectedLevel].forEach(dept => {
              const option = document.createElement("option");
              option.value = dept;
              option.textContent = dept;
              deptSelect.appendChild(option);
            });
          }
        }
      </script>
  </body>
</html>